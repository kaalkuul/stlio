#include "geometry.h"

namespace Geometry
{
    stlio::Facet _facet(const stlio::Vec3& n,
        const stlio::Vec3& v0,
        const stlio::Vec3& v1,
        const stlio::Vec3& v2)
    {
        stlio::Facet f;
        f.n = n;
        f.v[0] = v0;
        f.v[1] = v1;
        f.v[2] = v2;

        return f;
    }

    stlio::Facet _facet(const stlio::Vec3& v0,
        const stlio::Vec3& v1,
        const stlio::Vec3& v2)
    {
        stlio::Vec3 n, u, v;

        u.x = v1.x - v0.x;
        u.y = v1.y - v0.y;
        u.z = v1.z - v0.z;

        v.x = v2.x - v0.x;
        v.y = v2.y - v0.y;
        v.z = v2.z - v0.z;

        n.x = u.y * v.z - u.z * v.y;
        n.y = u.z * v.x - u.x * v.z;
        n.z = u.x * v.y - u.y * v.x;

        return _facet(n, v0, v1, v2);
    }

    stlio::Vec3 _v(float x, float y, float z)
    {
        stlio::Vec3 v;
        v.x = x;
        v.y = y;
        v.z = z;
        return v;
    }

    void box20mm(std::vector<stlio::Facet>& facets)
    {
        facets.push_back(_facet(
            _v(0.000000e+00f, -0.000000e+00f, -1.000000e+00f),
            _v(2.000000e+01f, 2.000000e+01f, 0.000000e+00f),
            _v(2.000000e+01f, 0.000000e+00f, 0.000000e+00f),
            _v(0.000000e+00f, 0.000000e+00f, 0.000000e+00f)
        ));

        facets.push_back(_facet(
            _v(-0.000000e+00f, 0.000000e+00f, -1.000000e+00f),
            _v(2.000000e+01f, 2.000000e+01f, 0.000000e+00f),
            _v(0.000000e+00f, 0.000000e+00f, 0.000000e+00f),
            _v(0.000000e+00f, 2.000000e+01f, 0.000000e+00f)
        ));

        facets.push_back(_facet(
            _v(0.000000e+00f, 0.000000e+00f, 1.000000e+00f),
            _v(2.000000e+01f, 2.000000e+01f, 2.000000e+01f),
            _v(0.000000e+00f, 2.000000e+01f, 2.000000e+01f),
            _v(0.000000e+00f, 0.000000e+00f, 2.000000e+01f)
        ));

        facets.push_back(_facet(
            _v(0.000000e+00f, 0.000000e+00f, 1.000000e+00f),
            _v(2.000000e+01f, 2.000000e+01f, 2.000000e+01f),
            _v(0.000000e+00f, 0.000000e+00f, 2.000000e+01f),
            _v(2.000000e+01f, 0.000000e+00f, 2.000000e+01f)
        ));

        facets.push_back(_facet(
            _v(1.000000e+00f, 0.000000e+00f, -0.000000e+00f),
            _v(2.000000e+01f, 2.000000e+01f, 0.000000e+00f),
            _v(2.000000e+01f, 2.000000e+01f, 2.000000e+01f),
            _v(2.000000e+01f, 0.000000e+00f, 2.000000e+01f)
        ));

        facets.push_back(_facet(
            _v(1.000000e+00f, 0.000000e+00f, 0.000000e+00f),
            _v(2.000000e+01f, 2.000000e+01f, 0.000000e+00f),
            _v(2.000000e+01f, 0.000000e+00f, 2.000000e+01f),
            _v(2.000000e+01f, 0.000000e+00f, 0.000000e+00f)
        ));

        facets.push_back(_facet(
            _v(0.000000e+00f, -1.000000e+00f, 0.000000e+00f),
            _v(2.000000e+01f, 0.000000e+00f, 0.000000e+00f),
            _v(2.000000e+01f, 0.000000e+00f, 2.000000e+01f),
            _v(0.000000e+00f, 0.000000e+00f, 2.000000e+01f)
        ));

        facets.push_back(_facet(
            _v(0.000000e+00f, -1.000000e+00f, 0.000000e+00f),
            _v(2.000000e+01f, 0.000000e+00f, 0.000000e+00f),
            _v(0.000000e+00f, 0.000000e+00f, 2.000000e+01f),
            _v(0.000000e+00f, 0.000000e+00f, 0.000000e+00f)
        ));

        facets.push_back(_facet(
            _v(-1.000000e+00f, 0.000000e+00f, 0.000000e+00f),
            _v(0.000000e+00f, 0.000000e+00f, 0.000000e+00f),
            _v(0.000000e+00f, 0.000000e+00f, 2.000000e+01f),
            _v(0.000000e+00f, 2.000000e+01f, 2.000000e+01f)
        ));

        facets.push_back(_facet(
            _v(-1.000000e+00f, 0.000000e+00f, 0.000000e+00f),
            _v(0.000000e+00f, 0.000000e+00f, 0.000000e+00f),
            _v(0.000000e+00f, 2.000000e+01f, 2.000000e+01f),
            _v(0.000000e+00f, 2.000000e+01f, 0.000000e+00f)
        ));

        facets.push_back(_facet(
            _v(0.000000e+00f, 1.000000e+00f, 0.000000e+00f),
            _v(2.000000e+01f, 2.000000e+01f, 2.000000e+01f),
            _v(2.000000e+01f, 2.000000e+01f, 0.000000e+00f),
            _v(0.000000e+00f, 2.000000e+01f, 0.000000e+00f)
        ));

        facets.push_back(_facet(
            _v(0.000000e+00f, 1.000000e+00f, 0.000000e+00f),
            _v(2.000000e+01f, 2.000000e+01f, 2.000000e+01f),
            _v(0.000000e+00f, 2.000000e+01f, 0.000000e+00f),
            _v(0.000000e+00f, 2.000000e+01f, 2.000000e+01f)
        ));
    }
}
